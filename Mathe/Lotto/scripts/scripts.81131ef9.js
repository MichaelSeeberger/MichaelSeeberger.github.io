"use strict";angular.module("gewinnenApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","mgcrea.ngStrap","LocalForageModule","ngWebworker"]).config(["$routeProvider","WebworkerProvider",function(a,b){a.when("/",{templateUrl:"views/index.html",controller:"IndexCtrl",controllerAs:"index"}).when("/spieler",{templateUrl:"views/players.html",controller:"PlayersCtrl",controllerAs:"players"}).when("/minilotto/tipps",{templateUrl:"views/minilotto/tipps.html",controller:"MinilottoCtrl",controllerAs:"minilotto",step:1}).when("/minilotto/ziehungen",{templateUrl:"views/minilotto/draws.html",controller:"MinilottoDrawsCtrl",step:2}).when("/minilotto/grafiken",{templateUrl:"views/minilotto/graphs.html",controller:"GraphsCtrl",controllerAs:"graphs",step:3}).when("/minilotto",{redirectTo:"/minilotto/tipps"}).when("/lotto",{redirectTo:"/lotto/tipps"}).when("/lotto/tipps",{templateUrl:"views/lotto/bets.html",controller:"BigLottoBetsCtrl",step:1}).when("/lotto/ziehungen",{templateUrl:"views/lotto/draws.html",controller:"BigLottoDrawsCtrl",controllerAs:"bigLottoDraws",step:2}).when("/lotto/grafiken",{templateUrl:"views/lotto/graphs.html",controller:"BigLottoGraphsCtrl",controllerAs:"bigLottoGraphs",step:3}).when("/einstellungen",{templateUrl:"views/settings.html",controller:"SettingsCtrl",controllerAs:"settings"}).otherwise({redirectTo:"/"}),b.setHelperPath("./bower_components/ng-webworker/src/worker_wrapper.min.js")}]),angular.module("gewinnenApp").directive("gwStudentsPanel",["PlayerService",function(a){return{templateUrl:"views/templates/students-panel.html",restrict:"E",scope:{},link:function(b){a.findAll().then(function(a){b.players=a}),b.deletePlayer=function(b){a.deletePlayer(b.id)}}}}]),angular.module("gewinnenApp").controller("IndexCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("gewinnenApp").controller("PlayersCtrl",["$scope","PlayerService",function(a,b){a.newPlayer={},a.addPlayer=function(){b.newPlayerWithName(a.newPlayer.name),a.newPlayer={},a.playerForm.$setUntouched(),a.playerForm.$setPristine()},a.canAddPlayer=function(){return b.canAddPlayer()&&a.newPlayer.name&&""!==a.newPlayer.name}}]),angular.module("gewinnenApp").controller("MainCtrl",["$scope","$location",function(a,b){a.$watch(function(){return b.path()},function(b){_.includes(b,"spieler")?a.activeView="players":_.includes(b,"minilotto")?a.activeView="minilotto":_.includes(b,"lotto")?a.activeView="lotto":_.includes(b,"einstellungen")?a.activeView="einstellungen":a.activeView="index"}),a.isTouchDevice=function(){return!0===("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}}]),angular.module("gewinnenApp").controller("MinilottoCtrl",["$scope","$route","$modal","$location","PlayerService","LottoService","PreferencesService",function(a,b,c,d,e,f,g){a.step=b.current.$$route.step;var h;f.getOrCreateLotto("minilotto3outof5",5,3).then(function(b){h=b,a.lotto=b}),this.prefTable=g.getTable("MinilottoBet",{firstVisit:!0});var i=c({scope:a,templateUrl:"views/templates/3outof5help-modal.html",show:this.prefTable.getBool("firstVisit")});this.prefTable.setBool("firstVisit",!1);var j=c({scope:a,templateUrl:"views/templates/continue-with-invalid-modal.html",show:!1}),k=function(a){return h?h.isValidBet(h.betForPlayer(a)):!1};a.validBetForPlayerWithId=function(a){return k(a)},a.betForPlayer=function(a){return h?h.betForPlayer(a.id):[]},a.showHelpModal=function(){i.$promise.then(i.show)},a.continueToDraws=function(){e.findAll().then(function(b){var c=!0;_.each(b,function(a){c=c&&k(a.id)}),c?a.reallyContinue():j.$promise.then(j.show)})},a.reallyContinue=function(){j.$promise.then(j.hide),d.path("/minilotto/ziehungen")}}]),angular.module("gewinnenApp").controller("SettingsCtrl",["$scope","$window","$cookies","$rootScope","$modal","LottoService","PlayerService","PreferencesService",function(a,b,c,d,e,f,g,h){var i=this,j={getPlayers:function(){return g.findAll()},getGame:function(){return f.getOrCreateLotto(this.game.name,this.game.options,this.game.numberOfChoices)},deleteBets:function(){this.getGame(function(a){a.clearAllBets()})},deleteSelectedPlayerBet:function(){this.selectedPlayer&&this.getGame(function(a){a.removeBetForPlayer(this.selectedPlayer.id)})},selectedPlayerExists:function(){return void 0!==this.selectedPlayer&&void 0!==this.selectedPlayer.id}},k={game:{name:"minilotto3outof5",numberOfChoices:3,options:5},selectedPlayer:void 0};_.extend(k,j);var l={game:{name:"lotto6outof42",numberOfChoices:6,options:42},selectedPlayer:void 0};_.extend(l,j);var m=h.getTable("Settings",{password:""});this.password=m.getString("password"),a.loggedIn=""===this.password,a.passwordForm={password:"",passwordConfirmation:"",enteredPassword:""};var n,o,p=function(a,b,c){o.title=a,o.body=b,"undefined"==typeof c&&(c=!0),o.showButtons=c},q=function(a,b,c){n||(o=d.$new(),o.showButtons=!0,n=e({templateUrl:"views/templates/info-modal.html",scope:o,backdrop:"static",keyboard:!1,show:!1})),p(a,b,c),n.$promise.then(n.show)};a.setPassword=function(){return a.passwordForm.password!==a.passwordForm.passwordConfirmation?void q("Passwort nicht gesetzt","Die Passwörter stimmen nicht überein."):(m.setString("password",a.passwordForm.password),void(""===a.passwordForm.password?q("Passwort zurückgesetzt","Das Passwort wurde erfolgreich zurückgesetzt"):q("Passwort festgelegt","Das Passwort wurde erfolgreich festgelegt. Beim nächsten aufruf der Einstellungen wird das Passwort verlangt.")))},a.logIn=function(){a.loggedIn=i.password===a.passwordForm.enteredPassword,a.loggedIn||q("Falsches Passwort","Das eingegebene Passwort ist nicht gültig.")};var r=function(){q("Daten werden gelöscht","Alle Daten und Einstellungen werden gelöscht...",!1),f.clearAll(),g.deleteAll().then(function(){p("Daten gelöscht","Alle Daten und Einstellungen wurden gelöscht.")}),angular.forEach(c.getAll(),function(a,b){c.remove(b)})};a.deleteAllData=function(){r()},a.deleteAllBets=function(){q("Wetten löschen","Es werden alle Wetten gelöscht...",!1),f.findAll().then(function(a){_.each(a,function(a){a.clearAllBets()}),p("Wetten gelöscht","Es wurden alle Tipps gelöscht.")})},a.deleteAllDraws=function(){q("Alle Ziehungen löschen","Es werden alle Ziehungen gelöscht...",!1),l.getGame().then(function(a){k.getGame().then(function(b){a.resetDraws(),b.resetDraws(),p("Alle Ziehungen gelöscht","Alle Ziehungen wurden gelöscht")})})},a.createSampleData=function(){q("Daten werden angelegt","Daten werden angelegt...",!1),f.clearAll(),g.deleteAll().then(function(){k.getGame().then(function(a){l.getGame().then(function(b){a.createAndAddRandomDrawsInBackground(10),b.createAndAddRandomDrawsInBackground(10);var c=["Markus","Luisa","Maria","Kristin","Sven","Florian","Sarah","Matthias","Christian","Simone"],d=0,e=function(){g.newPlayerWithName(c[d]).then(function(f){a.setBetForPlayer(f,a.randomNumbersForDraw()),b.setBetForPlayer(f,b.randomNumbersForDraw()),++d<c.length?e():p("Daten angelegt","Es wurden 10 Spieler mit Tipps hinzugefügt. Ebenso wurden je Lotto 10 Ziehungen angelegt.")})};e()})})})},a.deleteAllPlayers=function(){q("Spieler werden gelöscht","Die Spieler werden gelöscht...",!1),g.deleteAll().then(function(){p("Spieler gelöscht","Es wurden alle Spieler gelöscht.")})},a.deleteMinilottoBets=function(){q("Wetten werden gelöscht","Die Tipps werden gelöscht...",!1),k.getGame().then(function(a){a.clearAllBets().then(function(){p("Wetten gelöscht","Es wurden alle Tipps für das Minilotto gelöscht.")})})},a.deleteMinilottoDraws=function(){q("Ziehungen löschen","Ziehungen werden gelöscht...",!1),k.getGame().then(function(a){a.resetDraws().then(function(){p("Ziehungen gelöscht","Die Ziehungen für das Minilotto wurden gelöscht")})})},a.minilotto=k,a.deleteBigLottoBets=function(){q("Wetten werden gelöscht","Die Tipps werden gelöscht...",!1),l.getGame().then(function(a){a.clearAllBets().then(function(){p("Wetten gelöscht","Es wurden alle Tipps für das Minilotto gelöscht.")})})},a.deleteBigLottoDraws=function(){q("Ziehungen löschen","Ziehungen werden gelöscht...",!1),l.getGame().then(function(a){a.resetDraws().then(function(){p("Ziehungen gelöscht","Die Ziehungen für das Minilotto wurden gelöscht")})})}}]),angular.module("gewinnenApp").controller("MinilottoDrawsCtrl",["$scope","$modal","$route","LottoService","PlayerService","PreferencesService",function(a,b,c,d,e,f){var g,h;d.getOrCreateLotto("minilotto3outof5",5,3).then(function(b){a.minilotto=b}),e.findAll().then(function(b){a.players=b}),this.init=function(){a.showIndividualDraws=!0,a.newDrawForm={drawsCount:1,deletePreviousDraws:!0},a.step=c.current.$$route.step,a.drawInProgress=!1},this.prefTable=f.getTable("MinilottoDraws",{firstVisit:!0}),a.range=function(a){return new Array(a)},a.validBetForPlayer=function(a){return this.minilotto.isValidBet(this.minilotto.betForPlayer(a.id))},a.toggleShowIndividualDraws=function(){a.showIndividualDraws=!a.showIndividualDraws},a.isValidDrawCount=function(){return a.newDrawForm.drawsCount>=1},a.showHelp=function(){g.$promise.then(g.show)},a.performDraws=function(){a.newDrawForm.drawsCount>=100?h.$promise.then(h.show):i()},a.dismissTooManyDrawsModalAndContinue=function(){h.hide(),i()};var i=function(){a.drawInProgress=!0,a.newDrawForm.deletePreviousDraws&&a.minilotto.resetDraws();for(var b=0;b<a.newDrawForm.drawsCount;b++)a.minilotto.createAndAddRandomDraw();a.drawInProgress=!1};this.init(),g=b({scope:a,templateUrl:"views/templates/3outof5help-modal.html",show:this.prefTable.getBool("firstVisit")}),this.prefTable.setBool("firstVisit",!1),h=b({scope:a,templateUrl:"views/templates/too-many-draws-modal.html",show:!1})}]),angular.module("gewinnenApp").directive("gwBarChart",function(){return{restrict:"E",replace:!0,template:'<div class="chart"></div>',scope:{xAxisLabel:"=gwXAxisLabel",data:"=gwChartData",xValues:"=gwXValues",xAxisConverter:"&gwXAxisConverter"},link:function(a,b){var c=function(){if("undefined"!=typeof a.data){var c=_.clone(a.data),d=_.max(c),e={top:20,right:20,bottom:50,left:10*d.toString().length+10},f=950-e.left-e.right,g=500-e.top-e.bottom,h=d3.scaleBand().range([0,f]).padding(.1),i=d3.scaleLinear().range([g,0]);h.domain(c.map(function(a,b){return b}));var j=d3.max(c,function(a){return a});i.domain([0,j]);var k=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(a){return"undefined"!=typeof a.value?a.value:a}),l=d3.select(b[0]).append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+(f+e.left+e.right)+" "+(g+e.top+e.bottom)).append("g").attr("transform","translate("+e.left+", "+e.top+")");l.call(k),l.selectAll(".bar").data(c).enter().append("rect").attr("class","bar").attr("x",function(a,b){return h(b)}).attr("y",function(a){return i(a)}).attr("width",h.bandwidth()).attr("height",function(a){return g-i(a)}).attr("fill","teal").on("mouseover",k.show).on("mouseout",k.hide);var m=_.map(c,function(a,b){return{value:a,index:b}});l.selectAll(".helpBar").data(m).enter().filter(function(a){return g-i(a.value)<5}).append("rect").attr("x",function(a){return h(a.index)}).attr("y",function(){return g-5}).attr("width",h.bandwidth()).attr("height",5).attr("opacity",0).on("mouseover",k.show).on("mouseout",k.hide);var n=d3.axisBottom(h);a.xValues&&a.xValues.length===c.length?n.tickFormat(function(b,c){return a.xValues[c]}):a.xValues&&a.xValues.length!==c.length&&console.log("bar-chart: data and x values not matching in length!"),l.append("g").attr("transform","translate(0,"+g+")").style("font-size","13pt").call(n);var o=d3.axisLeft(i);o.tickFormat(d3.format("d"));var p=0;if(10>=j)p=j;else for(var q=[9,11,12,13,14,15],r=0;r<q.length&&0===p;r++)j%q[r]===0&&(p=q[r]);0!==p&&o.ticks(p),l.append("g").style("font-size","13pt").call(o),(a.xAxisLabel||a.xAxisLabel.length>0)&&l.append("text").text(a.xAxisLabel).attr("transform","translate(0, "+(g+40)+")").attr("x",f/2).attr("y",0).style("font-size","14pt").attr("text-anchor","middle")}};a.$watch("data",function(){c()})}}}),angular.module("gewinnenApp").controller("GraphsCtrl",["$scope","$modal","$route","LottoService","PreferencesService",function(a,b,c,d,e){var f;d.getOrCreateLotto("minilotto3outof5",5,3).then(function(b){a.minilotto=b,a.gameStatistics=b.statistics,a.numberStatistics=b.numberStatistics}),a.tabs={activeTab:1},a.step=c.current.$$route.step,a.showHelp=function(){f.$promise.then(f.show)},a.labelAtIndex=function(a){return a+1},this.prefTable=e.getTable("MinilottoGraphs",{firstVisit:!0}),f=b({scope:a,templateUrl:"views/templates/3outof5help-modal.html",show:this.prefTable.getBool("firstVisit")}),this.prefTable.setBool("firstVisit",!1)}]),angular.module("gewinnenApp").service("LottoService",["$modal","$localForage","$q","Webworker",function(a,b,c,d){var e=b.createInstance({name:"Gewinnen_LottoService"}),f={matchesForDraw:function(a){var b=0;return _.each(this.numbers,function(c){_.indexOf(a.numbers,c)>=0&&b++}),b}},g={addDrawWithoutSaving:function(a){var b={numbers:_.cloneDeep(a),statistics:_.fill(new Array(this.numberOfChoices+1),0)};this.draws.push(b),this.didAddDraw(b)},randomNumbersForDraw:function(){for(var a=new Array(this.options),b=0;b<this.options;)a[b]=++b;var c=[];for(b=0;b<this.numberOfChoices;b++){var d=Math.floor(Math.random()*a.length);c.push(a.splice(d,1)[0])}return _.sortBy(c)},createDrawsFromInfo:function(a,b){for(var c={statistics:a.statistics,numberStatistics:a.numberStatistics,draws:[],bets:a.bets},d=0;b>d;d++){for(var e=new Array(a.options),f=0;f<a.options;)e[f]=++f;var g=[];for(f=0;f<a.numberOfChoices;f++){var h=Math.floor(Math.random()*e.length);g.push(e.splice(h,1)[0])}for(var i=Math.floor(Math.log10(Math.max.apply(Math,g)))+1,j=0;i>j;j++){for(var k=[[],[],[],[],[],[],[],[],[],[]],l=0;l<a.numberOfChoices;l++){var m=parseInt(g[l]/Math.pow(10,j))%10;k[m].push(g[l])}g=[].concat.apply([],k)}for(var n={numbers:g,statistics:new Array(a.numberOfChoices+1)},o=0;o<n.statistics.length;o++)n.statistics[o]=0;for(var p in c.bets){for(var q=c.bets[p],r=0,s=0;s<q.numbers.length;s++)for(var t=q.numbers[s],u=0;u<n.numbers.length;u++)n.numbers[u]!==t||r++;c.statistics[r]++,q.statistics[r]++,n.statistics[r]++}for(var v=0;v<n.numbers.length;v++)c.numberStatistics[n.numbers[v]-1]++;if(c.draws.push(n),d%Math.floor(b/100)===0){var w=Math.floor(d/b*100);notify({progress:Math.floor(w),draws:c.draws}),c.draws=[]}}complete(c)},createInWebworkerAndAddRandomDraws:function(a,b,c){if(!Worker)return this.createAndAddRandomDrawsInBackground(a),void("function"==typeof c&&c(100));var e=d.create(this.createDrawsFromInfo,{async:!0}),g=this,h=_.mapValues(this.bets,function(a){return{numbers:a.numbers,statistics:a.statistics}}),i=[g.draws];e.run({numberOfChoices:g.numberOfChoices,options:g.options,statistics:g.statistics,numberStatistics:g.numberStatistics,bets:h},a).then(function(a){g.bets=a.bets;for(var b in g.bets)_.extend(g.bets[b],f);g.statistics=a.statistics,g.numberStatistics=a.numberStatistics,_.each(a.draws,function(){}),i.push(a.draws),g.draws=[].concat.apply([],i),g.save(),c&&c()},function(a){console.log(a)},function(a){i.push(a.draws),"function"==typeof b&&b(a.progress)})},createAndAddRandomDrawsInBackground:function(a){for(var b=0;a>b;b++){var c={numbers:this.randomNumbersForDraw(),statistics:_.fill(new Array(this.numberOfChoices+1),0)};for(var d in this.bets){var e=this.bets[d],f=e.matchesForDraw(c);this.statistics[f]++,e.statistics[f]++,c.statistics[f]++}for(var g=0;g<c.numbers.length;g++)this.numberStatistics[c.numbers[g]-1]++;this.draws.push(c)}this.save()},setBetForPlayer:function(a,b){if(!this.isValidBet(b))throw"Invalid bet";this.bets[a.id.toString()]&&this.willRemoveBetForPlayer(a.id);var c={numbers:_.cloneDeep(b),statistics:_.fill(new Array(this.numberOfChoices+1),0)};_.extend(c,f),this.bets[a.id.toString()]=c;for(var d=0;d<this.draws.length;d++){var e=this.draws[d],g=c.matchesForDraw(e);e.statistics[g]++,c.statistics[g]++,this.statistics[g]++}this.save()},betForPlayer:function(a){var b=this.bets[a.toString()];return b?b.numbers:void 0},isValidBet:function(a){if(!a||a.length!==this.numberOfChoices)return!1;for(var b=[],c=0;c<a.length;c++){var d=a[c];if(d>this.options||1>d)return!1;if(void 0===d)return!1;if(_.indexOf(b,d)>=0)return!1;b.push(d)}return!0},playerHasValidBet:function(a){return this.isValidBet(this.betForPlayer(a))},removeBetForPlayer:function(a){this.bets[a]&&(this.willRemoveBetForPlayer(a),delete this.bets[a],this.save())},willRemoveBetForPlayer:function(a){for(var b=this.bets[a],c=0;c<this.draws.length;c++){var d=this.draws[c],e=b.matchesForDraw(d);d.statistics[e]--,this.statistics[e]--}},didAddDraw:function(a){for(var b in this.bets){var c=this.bets[b],d=c.matchesForDraw(a);c.statistics[d]++,a.statistics[d]++,this.statistics[d]++}for(var e=0;e<this.options;e++)this.numberStatistics[a.numbers[e]-1]++},clearAll:function(){return this.draws=[],this.bets={},_.fill(this.statistics,0),_.fill(this.numberStatistics,0),this.save()},resetDraws:function(){return this.draws=[],_.forEach(this.bets,function(a){_.fill(a.statistics,0)}),_.fill(this.statistics,0),_.fill(this.numberStatistics,0),this.save()},clearAllBets:function(){this.bets={};var a=this.numberOfChoices;return _.each(this.draws,function(b){b.statistics=_.fill(new Array(a),0)}),_.fill(this.statistics,0),this.save()},save:function(){var b=c.defer(),d={name:this.name,options:this.options,numberOfChoices:this.numberOfChoices,draws:this.draws,bets:_.mapValues(this.bets,function(a){return{numbers:a.numbers,statistics:a.statistics}}),statistics:this.statistics,numberStatistics:this.numberStatistics};return e.setItem(this.name,d).then(function(){b.resolve(this)})["catch"](function(c){console.log(c),a({templateUrl:"views/templates/could-not-save-modal.html",show:!0}),b.reject(c)}),b.promise}},h=function(a){return _.extend(a,g),_.each(a.bets,function(a){_.extend(a,f)}),a};this.getOrCreateLotto=function(a,b,d){var e=c.defer();return this.findAll().then(function(c){var f;c[a]?f=c[a]:(f={name:a,options:b,numberOfChoices:d,draws:[],bets:{},statistics:_.fill(new Array(d+1),0),numberStatistics:_.fill(new Array(b),0)},i[a]=f,h(f),f.save()),e.resolve(f)}),e.promise},this.findAll=function(){var a=c.defer();if(null!==i)return a.resolve(i),a.promise;var b={};return e.iterate(function(a,c){b[c]=h(a)}).then(function(){i=b,a.resolve(i)})["catch"](function(b){a.reject(b)}),a.promise},this.clearAll=function(){e.clear(),i={}};var i=null}]),angular.module("gewinnenApp").service("PlayerService",["$localForage","$q","LottoService",function(a,b,c){var d=a.createInstance({name:"Gewinnen_PlayerService"}),e=this,f={save:function(){var a={id:this.id,name:this.name};d.setItem(this.id,a)}};this.newPlayerWithName=function(a){var c=b.defer(),d=this;return g().then(function(b){var e=function(a){h.players.push(a),a.save()},g={id:b,name:a};_.extend(g,f),null===h.players?d.findAll().then(function(){e(g),c.resolve(g)}):(e(g),c.resolve(g))},function(a){c.reject(a)}),c.promise},this.deletePlayer=function(a){var e=b.defer(),f=_.findIndex(h.players,function(b){return b.id===a});return 0>f?(b.reject("No such player with id: "+a),e.promise):(c.findAll().then(function(b){_.each(b,function(b){b.removeBetForPlayer(a)}),h.players.splice(f,1),d.removeItem(a),e.resolve()}),e.promise)},this.deleteAll=function(){var a=b.defer();return c.findAll().then(function(b){e.findAll().then(function(c){for(var e=0;e<c.length;c++){var f=c[e];for(var g in b){var i=b[g];i.removeBetForPlayer(f.id)}}h.players=[],h.nextId=0,d.clear().then(function(){a.resolve()})},function(b){a.reject(b)})},function(b){a.reject(b)}),a.promise},this.findAll=function(){var a=b.defer();if(null!==h.players)return a.resolve(h.players),a.promise;var c=[];return d.iterate(function(a,b){"nextId"!==b&&(_.extend(a,f),c.push(a))}).then(function(){h.players=c,a.resolve(h.players)})["catch"](function(b){a.reject(b)}),a.promise},this.canAddPlayer=function(){return h.canAddPlayer};var g=function(){var a=b.defer();return null!==h.nextId?(d.setItem("nextId",h.nextId),a.resolve(h.nextId++)):d.getItem("nextId").then(function(b){null===b?h.nextId=0:h.nextId=parseInt(b),h.canAddPlayer=!0,d.setItem("nextId",h.nextId),a.resolve(h.nextId++)})["catch"](function(b){a.reject(b)}),a.promise},h={canAddPlayer:!1,nextId:null,players:null};g()}]),angular.module("gewinnenApp").directive("gwPlayerHits",["$route","$modal","PlayerService",function(a,b,c){return{templateUrl:"views/templates/gw-player-hits-panel.html",restrict:"E",replace:!0,scope:{game:"=gwGame",showTotals:"=gwShowTotal",helpModalUrl:"=gwHelpModalUrl"},link:function(d){d.step=a.current.$$route.step;var e;d.helpModalUrl&&(e=b({scope:d,templateUrl:d.helpModalUrl,show:!1})),c.findAll().then(function(a){d.players=a}),d.validBetForPlayer=function(a){return d.game?d.game.isValidBet(d.game.betForPlayer(a.id)):!1},d.showHelpModal=function(){e&&e.$promise.then(e.show)}}}}]),angular.module("gewinnenApp").controller("BigLottoBetsCtrl",["$scope","$modal","$route","PlayerService","LottoService","PreferencesService",function(a,b,c,d,e,f){e.getOrCreateLotto("lotto6outof42",42,6).then(function(b){a.game=b}),a.step=c.current.$$route.step,this.prefTable=f.getTable("BigLottoBets",{firstVisit:!0}),b({scope:a,templateUrl:"views/templates/big-lotto-help-modal.html",show:this.prefTable.getBool("firstVisit")}),this.prefTable.setBool("firstVisit",!1)}]),angular.module("gewinnenApp").directive("gwPlayerBets",["$modal","$route","LottoService","PlayerService",function(a,b,c,d){return{templateUrl:"views/templates/gw-player-bets-panel.html",restrict:"E",scope:{game:"=gwGame",helpModalUrl:"=gwHelpModalUrl"},link:function(c){c.step=b.current.$$route.step;var e;c.helpModalUrl&&(e=a({scope:c,templateUrl:c.helpModalUrl,show:!1})),d.findAll().then(function(a){c.players=a}),c.betForPlayer=function(a){return c.game?c.game.betForPlayer(a):[]},c.validBetForPlayerWithId=function(a){return c.game?c.game.isValidBet(c.game.betForPlayer(a)):!1},c.glyphiconClass=function(a){return this.validBetForPlayerWithId(a)?"text-success glyphicon-ok":"text-warning glyphicon-edit"},c.showHelpModal=function(){c.helpModalUrl&&e.$promise.then(e.show)}}}}]),angular.module("gewinnenApp").directive("gwEditPlayerBet",function(){return{templateUrl:"views/templates/gw-edit-player-bet-form.html",restrict:"E",scope:{game:"=gwGame",player:"=gwPlayer"},link:function(a){a.game.betForPlayer(a.player.id)?a.bet=_.cloneDeep(a.game.betForPlayer(a.player.id)):a.bet=new Array(a.game.numberOfChoices),a.range=function(a){var b=new Array(a),c=0;do b[c]=c;while(++c<a);return b},a.validInput=function(b){if(a["player"+a.player.id].$$controls[b].$dirty===!1)return!0;if(a.bet[b]<1||a.bet[b]>a.game.options)return!1;for(var c=0;c<a.game.numberOfChoices;c++)if(c!==b&&a.bet[c]===a.bet[b])return!1;return!0},a.validForm=function(){return a.game.isValidBet(a.bet)},a.updatePlayer=function(){a.game.setBetForPlayer(a.player,_.cloneDeep(_.sortBy(a.bet)))}}}}),angular.module("gewinnenApp").directive("gwEditBets",["PlayerService",function(a){return{templateUrl:"views/templates/gw-edit-bets-panel.html",restrict:"E",scope:{game:"=gwGame"},link:function(b){a.findAll().then(function(a){b.players=a}),b.hideValidPlayers=!0;var c=function(a){return b.game?b.game.isValidBet(b.game.betForPlayer(a)):!1};b.hasInvalidPlayers=function(){var a=!0;return _.each(b.players,function(b){a=a&&c(b.id)}),!a},b.hidePlayer=function(a){return b.game?b.game.playerHasValidBet(a.id)&&b.hideValidPlayers:!0},b.toggleHideValidPlayers=function(){b.hideValidPlayers=!b.hideValidPlayers}}}}]),angular.module("gewinnenApp").controller("BigLottoGraphsCtrl",["$scope","$modal","$route","LottoService","PreferencesService",function(a,b,c,d,e){d.getOrCreateLotto("lotto6outof42",42,6).then(function(b){a.game=b,a.gameStatistics=b.statistics,a.numberStatistics=b.numberStatistics}),a.step=c.current.$$route.step;var f=function(a){for(var b=new Array(a),c=0;a>c;)b[c]=++c;return b};a.range=f(42),this.prefTable=e.getTable("BigLottoGraphs",{firstVisit:!0}),b({scope:a,templateUrl:"views/templates/big-lotto-help-modal.html",show:this.prefTable.getBool("firstVisit")}),this.prefTable.setBool("firstVisit",!1)}]),angular.module("gewinnenApp").directive("gwNumberStatistics",function(){return{templateUrl:"views/templates/gw-number-statistics-panel.html",restrict:"E",scope:{game:"=gwGame"}}}),angular.module("gewinnenApp").controller("BigLottoDrawsCtrl",["$scope","$modal","$route","LottoService","PreferencesService",function(a,b,c,d,e){d.getOrCreateLotto("lotto6outof42",42,6).then(function(b){a.game=b}),a.step=c.current.$$route.step,this.prefTable=e.getTable("BigLottoDraws",{firstVisit:!0}),b({scope:a,templateUrl:"views/templates/big-lotto-help-modal.html",show:this.prefTable.getBool("firstVisit")}),this.prefTable.setBool("firstVisit",!1)}]),angular.module("gewinnenApp").service("HelperService",function(){this.isTouchDevice=function(){return!0===("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}}),angular.module("gewinnenApp").directive("gwDrawPanel",["$modal","HelperService","PreferencesService",function(a,b,c){return{templateUrl:"views/templates/gw-draw-panel.html",restrict:"E",scope:{game:"=gwGame"},link:function(d){var e,f=a({scope:d,templateUrl:"views/templates/too-many-draws-modal.html",show:!1}),g=a({scope:d,templateUrl:"views/templates/progress-modal.html",show:!1,backdrop:"static",keyboard:!1});d.newDrawForm={},d.$watch("game",function(){h()});var h=function(){d.showIndividualDraws=d.game&&d.game.draws.length<100,d.hitRange=d.game?new Array(d.game.numberOfChoices+1):0,d.drawNumberMinWidth=d.game&&d.game.options<10?"10pt":"20pt",e=c.getTable(d.game.name+"-drawPanel",{deletePreiousDraws:!0,drawsCount:5}),d.newDrawForm={deletePreviousDraws:e.getBool("deletePreviousDraws"),drawsCount:e.getInt("drawsCount")},null!==d.game&&(d.$watch("newDrawForm.drawsCount",function(){null!==d.newDrawForm.drawsCount&&e.setInt("drawsCount",d.newDrawForm.drawsCount)}),d.$watch("newDrawForm.deletePreviousDraws",function(){e.setBool("deletePreviousDraws",d.newDrawForm.deletePreviousDraws)}))};h(),d.isTouchDevice=b.isTouchDevice(),d.toggleShowIndividualDraws=function(){d.showIndividualDraws=!d.showIndividualDraws},d.isValidDrawCount=function(){return d.newDrawForm.drawsCount&&d.newDrawForm.drawsCount>0&&d.game},d.progress=0,d.performDraws=function(){d.newDrawForm.drawsCount>1e3?f.$promise.then(f.show):i()},d.dismissTooManyDrawsModalAndContinue=function(){f.hide(),d.showIndividualDraws=!1,i()};var i=function(){return d.game?(d.progress=0,d.newDrawForm.drawsCount>1e3&&g.$promise.then(g.show),d.drawInProgress=!0,d.newDrawForm.deletePreviousDraws&&d.game.resetDraws(),void d.game.createInWebworkerAndAddRandomDraws(d.newDrawForm.drawsCount,function(a){d.progress=a},function(){d.drawInProgress=!1,d.newDrawForm.drawsCount>1e3&&g.$promise.then(g.hide),d.progress=0})):void console.log("no game set")}}}}]),angular.module("gewinnenApp").directive("gwLoadingAlert",function(){return{template:'<div class="row"><div class="col-sm-2 col-lg-offset-4 center-block" style="float: none;"><div class="alert alert-warning center-block"><span class="glyphicon glyphicon-refresh gly-spin"></span> Laden...</div></div></div>',restrict:"E"}}),angular.module("gewinnenApp").service("PreferencesService",["$cookies","$window",function(a,b){var c=function(c,d){this.tableName=c,this.defaults=d,this._generateKey=function(a){return this.tableName+"."+a},this._get=function(b){return a.get(this._generateKey(b))},this._put=function(c,d){var e=new b.Date;a.put(this._generateKey(c),d,{expires:new Date(e.getFullYear()+10,e.getMonth(),e.getDate())})},this.resetToDefaults=function(){for(var b in this.defaults)a.remove(this._generateKey(b))},this.getBool=function(a){var b=this._get(a);return"undefined"!=typeof b?"true"===b||b===!0:this.defaults[a]===!0},this.setBool=function(a,b){this._put(a,b===!0?"true":"false")},this.getInt=function(a){var b=this._get(a);return"undefined"!=typeof b?parseInt(b):this.defaults[a]},this.setInt=function(a,b){this._put(a,b.toString())},this.getString=function(a){var b=this._get(a);return b?b:this.defaults[a]},this.setString=function(a,b){this._put(a,b.toString())}},d={};this.getTable=function(a,b){return d[a]||(d[a]=new c(a,b)),d[a]}}]),angular.module("gewinnenApp").run(["$templateCache",function(a){a.put("views/index.html",'<h1>Willkommen</h1> <p>Diese Seite bietet dir die Möglichkeit, ein Lottospiel zu simulieren.</p> <h5>Anleitung</h5> <ol> <li>Gib als erstes die Spieler ein. Wähle dazu im Menü oben den Punkt "Spieler" (oder benutze den Knopf ganz unten).</li> <li>Bearbeite die Aufgabe "3 aus 5". Die Anleitung dazu findest du in der Aufgabe.</li> <li>Wenn du fertig bist, kannst du noch ein "richtiges" Lotto spielen: 6 aus 42!</li> </ol> <p>Viel Spass beim spielen!</p> <div> <a href="/#!/spieler" class="btn btn-success">Spieler hinzufügen</a> </div>'),a.put("views/lotto/bets.html",'<gw-loading-alert ng-if="!game"></gw-loading-alert> <div class="row" ng-if="game"> <div class="col-sm-3"> <gw-player-bets gw-game="game" gw-help-modal-url="\'views/templates/big-lotto-help-modal.html\'"></gw-player-bets> </div> <div class="col-sm-9"> <gw-edit-bets gw-game="game"></gw-edit-bets> </div> </div>'),a.put("views/lotto/draws.html",'<gw-loading-alert ng-if="!game"></gw-loading-alert> <div class="row" ng-if="game"> <div class="col-sm-5"> <gw-player-hits gw-game="game" gw-help-modal-url="\'views/templates/big-lotto-help-modal.html\'"></gw-player-hits> </div> <div class="col-sm-7"> <gw-draw-panel gw-game="game"></gw-draw-panel> </div> </div>'),a.put("views/lotto/graphs.html",'<gw-loading-alert ng-if="!game"></gw-loading-alert> <div data-fade="1" ngmodel="tabs.activeTab" bs-tabs ng-if="game"> <div class="minilotto-tab" data-title="Treffer" name="Treffer" bs-pane> <div class="row"> <div class="col-sm-5"> <gw-player-hits gw-game="game" gw-show-total="true" gw-help-modal-url="\'views/templates/big-lotto-help-modal.html\'"></gw-player-hits> </div> <div class="col-sm-7"> <gw-bar-chart gw-chart-data="gameStatistics" gw-x-axis-label="\'Anzahl Richtige\'"></gw-bar-chart> </div> </div> </div> <div class="minilotto-tab" data-title="Gezogene Zahlen" name="Gezogene Zahlen" bs-pane> <div class="row"> <div class="col-sm-4"> <gw-number-statistics gw-game="game"></gw-number-statistics> </div> <div class="col-sm-8"> <gw-bar-chart gw-chart-data="numberStatistics" gw-x-axis-label="\'Zahl\'" gw-x-values="range"></gw-bar-chart> </div> </div> </div> </div>'),a.put("views/minilotto/draws.html",'<gw-loading-alert ng-if="!minilotto"></gw-loading-alert> <div class="row" ng-if="minilotto"> <div class="col-sm-4"> <gw-player-hits gw-game="minilotto" gw-help-modal-url="\'views/templates/3outof5help-modal.html\'"></gw-player-hits> </div> <div class="col-sm-8"> <gw-draw-panel gw-game="minilotto"></gw-draw-panel> </div> </div>'),a.put("views/minilotto/graphs.html",'<gw-loading-alert ng-if="!minilotto"></gw-loading-alert> <div data-fade="1" ngmodel="tabs.activeTab" bs-tabs ng-if="minilotto"> <div class="minilotto-tab" data-title="Treffer" name="Treffer" bs-pane> <div class="row"> <div class="col-sm-4"> <gw-player-hits gw-game="minilotto" gw-show-total="true" gw-help-modal-url="\'views/templates/3outof5help-modal.html\'"></gw-player-hits> </div> <div class="col-sm-8"> <gw-bar-chart gw-chart-data="gameStatistics" gw-x-axis-label="\'Anzahl Richtige\'"></gw-bar-chart> </div> </div> </div> <div class="minilotto-tab" data-title="Gezogene Zahlen" name="Gezogene Zahlen" bs-pane> <div class="row"> <div class="col-sm-4"> <gw-number-statistics gw-game="minilotto"></gw-number-statistics> </div> <div class="col-sm-8"> <gw-bar-chart gw-chart-data="numberStatistics" gw-x-axis-label="\'Zahl\'" gw-x-values="[1,2,3,4,5]"></gw-bar-chart> </div> </div> </div> </div>'),a.put("views/minilotto/tipps.html",'<gw-loading-alert ng-if="!lotto"></gw-loading-alert> <div class="row" ng-if="lotto"> <div class="col-sm-3"> <gw-player-bets gw-game="lotto" gw-help-modal-url="\'views/templates/3outof5help-modal.html\'"></gw-player-bets> </div> <div class="col-sm-9"> <gw-edit-bets gw-game="lotto"></gw-edit-bets> </div> </div> <div ng-if="lotto"> <button ng-click="continueToDraws()" class="btn btn-success pull-right">Weiter zu den Ziehungen</button> </div>'),
a.put("views/players.html",'<gw-loading-alert ng-if="!players"></gw-loading-alert> <div class="row" ng-show="players"> <div class="col-md-4"> <gw-students-panel></gw-students-panel> </div> <div class="col-md-8"> <div class="panel panel-info"> <div class="panel-heading"> <span class="glyphicon glyphicon-edit"></span> Spieler hinzufügen </div> <form role="form" id="add-player-form" name="playerForm"> <div class="panel-body"> <div class="form-group"> <label for="player-name">Name</label> <input type="text" class="form-control" id="player-name" placeholder="Name" name="playerName" ng-model="newPlayer.name" required> </div> </div> <div class="panel-footer"> <button type="submit" class="btn btn-success" ng-click="addPlayer()" ng-disabled="!playerForm.$valid && !canAddPlayer()">Hinzufügen</button> </div> </form> </div> </div> </div>'),a.put("views/settings.html",'<div class="panel panel-default" ng-if="!loggedIn"> <div class="panel-heading"> <h4>Passwort</h4> </div> <div class="panel-body"> <p>Gib das Passwort ein um die Einstellungen zu sehen:</p> <form class="form-inline"> <div class="form-group"> <label for="password">Passwort</label> <input class="form-control" type="password" id="password" ng-model="passwordForm.enteredPassword"> </div> <div class="form-group"> <button type="submit" class="btn btn-default" ng-click="logIn()">Anmelden</button> </div> </form> </div> </div> <div class="panel-group" ng-if="loggedIn"> <div class="panel panel-info"> <div class="panel-heading"> Allgemein </div> <table class="table settings-table"> <tr> <td>Passwort verlangen, um Einstellungen zu sehen. Um ein gesetztes Passwort zu löschen, die beiden Felder leer lassen und auf "Passwort festlegen" drücken.</td> <td> <form id="set-password" name="setPasswordForm"> <div class="form-group"> <label for="newPassword">Passwort</label> <input type="password" id="newPassword" class="form-control" ng-model="passwordForm.password"> </div> <div class="form-group"> <label for="newPasswordCheck">Bestätigen</label> <input type="password" id="newPasswordCheck" class="form-control" ng-model="passwordForm.passwordConfirmation"> </div> <div class="form-group"> <button type="submit" ng-click="setPassword()" class="btn btn-default">Passwort festlegen</button> </div> </form> </td> </tr> <tr> <td>Alle Tipps löschen</td> <td><button class="btn btn-danger" ng-click="deleteAllBets()">Tipps löschen</button></td> </tr> <tr> <td>Alle Ziehungen löschen</td> <td><button class="btn btn-danger" ng-click="deleteAllDraws()">Ziehungen löschen</button></td> </tr> <tr> <td>Alle Spieler löschen</td> <td><button class="btn btn-danger" ng-click="deleteAllPlayers()">Spieler löschen</button></td> </tr> <tr> <td> <p>Alles löschen</p> </td> <td><div class="panel panel-danger"> <div class="panel-heading">Warnung</div> <div class="panel-body"> <p>Diese Funktion löscht alle Daten, inklusive Passwort!</p> <button class="btn btn-danger" ng-click="deleteAllData()">Löschen</button> </div> </div></td> </tr> </table> </div> <div class="panel panel-info"> <div class="panel-heading"> Daten Generieren </div> <table class="table settings-table"> <tr> <td>10 Datensätze generieren</td> <td> <form id="createData" name="createDataForm"> <div class="form-group"> <button type="submit" ng-click="createSampleData()" class="btn btn-default">Daten Generieren</button> </div> </form> </td> </tr> </table> </div> <div class="panel panel-info"> <div class="panel-heading"> Minilotto: 3 aus 5 </div> <table class="table settings-table"> <tr> <td>Alle Tipps löschen</td> <td><button class="btn btn-danger" ng-click="deleteMinilottoBets()">Tipps löschen</button></td> </tr> <tr> <td>Alle Ziehungen löschen</td> <td><button class="btn btn-danger" ng-click="deleteMinilottoDraws()">Ziehungen löschen</button></td> </tr> </table> </div> <div class="panel panel-info"> <div class="panel-heading"> Lotto: 6 aus 42 </div> <table class="table settings-table"> <tr> <td>Alle Tipps löschen</td> <td><button class="btn btn-danger" ng-click="deleteBigLottoBets()">Tipps löschen</button></td> </tr> <tr> <td>Alle Ziehungen löschen</td> <td><button class="btn btn-danger" ng-click="deleteBigLottoDraws()">Ziehungen löschen</button></td> </tr> </table> </div> </div>'),a.put("views/templates/3outof5help-modal.html",'<div class="modal" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="$hide()">&times;</button> <h4>Minilotto: 3 aus 5</h4> </div> <div class="modal-body"> <p> In diesem Spiel kannst du drei Zahlen aus den Möglichkeiten 1, 2, 3, 4, 5 auswählen. Anschliessend führt ihr eine einzelne Ziehung durch. Schätze zuerst, wie viele dass du richtig hast! </p> <ol id="instruction3OutOf3"> <li ng-class="{inactive: step != 1}"> Wähle 3 Zahlen aus diesen 5 aus. </li> <li ng-class="{inactive: step != 2}">Führt mehrere Ziehungen durch (mindestens 3). <ol> <li>Stelle vor jeder Ziehung eine Vermutung auf, wie viele dass du richtig hast.</li> <li>Überprüfe, wie viele du tatsächlich richtig hattest.</li> </ol> </li> <li ng-class="{inactive: step != 2}"> Führt nun mehrere Ziehungen durch. Wähle dafür bei <div class="form-control" style="width: 12em">Anzahl Ziehungen <span class="glyphicon glyphicon-chevron-down"></span></div> eine grössere Zahl. </li> <li ng-class="{inactive: step != 3}"> Erstelle ein Balkendiagramm zu <ol> <li>der Verteilung der Anzahl Treffern und</li> <li>der Verteilung der gezogenen Zahlen.</li> </ol> </li> </ol> </div> <div class="modal-footer"> <button type="button" class="btn btn-success" ng-click="$hide()">OK</button> </div> </div> </div> </div>'),a.put("views/templates/big-lotto-help-modal.html",'<div class="modal" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="$hide()">&times;</button> <h4>Lotto: 6 aus 42</h4> </div> <div class="modal-body"> <p> In diesem Spiel kannst du 6 Zahlen aus den Möglichkeiten 1 bis 42 auswählen. Anschliessend führt ihr eine einzelne Ziehung durch. Schätze zuerst, wie viele dass du richtig hast! </p> <ol id="instruction3OutOf3"> <li ng-class="{inactive: step != 1}"> Wähle 6 Zahlen aus diesen 42 aus. </li> <li ng-class="{inactive: step != 2}">Führt mehrere Ziehungen durch (mindestens 3). <ol> <li>Stelle vor jeder Ziehung eine Vermutung auf, wie viele dass du richtig hast.</li> <li>Überprüfe, wie viele du tatsächlich richtig hattest.</li> </ol> </li> <li ng-class="{inactive: step != 2}"> Führt nun mehrere Ziehungen durch. Wähle dafür bei <div class="form-control" style="width: 12em">Anzahl Ziehungen <span class="glyphicon glyphicon-chevron-down"></span></div> eine grössere Zahl (zum Beispiel 100\'000). </li> <li ng-class="{inactive: step != 3}"> Erstelle ein Balkendiagramm zu <ol> <li>der Verteilung der Anzahl Treffern und</li> <li>der Verteilung der gezogenen Zahlen.</li> </ol> </li> </ol> </div> <div class="modal-footer"> <button type="button" class="btn btn-success" ng-click="$hide()">OK</button> </div> </div> </div> </div>'),a.put("views/templates/continue-with-invalid-modal.html",'<div class="modal" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="$hide()">&times;</button> <h4>Wirklich fortfahren?</h4> </div> <div class="modal-body"> Es haben noch nicht alle Spieler ihren Tipp abgegeben. Willst du trotzdem fortfahren? </div> <div class="modal-footer"> <button type="button" class="btn btn-success" ng-click="reallyContinue()">Fortfahren</button> <button type="button" class="btn btn-default" ng-click="$hide()">Abbrechen</button> </div> </div> </div> </div>'),a.put("views/templates/could-not-save-modal.html",'<div class="modal" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="$hide()">&times;</button> <h4>Fehler beim Speichern</h4> </div> <div class="modal-body"> <p> Die neuen Daten konnten nicht gespeichert werden. Du kannst mit den Daten arbeiten, verlierst sie aber wenn du die Seite neu lädtst. </p> </div> <div class="modal-footer"> <button type="button" class="btn btn-success" ng-click="$hide()">OK</button> </div> </div> </div> </div>'),a.put("views/templates/gw-draw-panel.html",'<div class="panel panel-info"> <div class="panel-heading"> <span class="glyphicon glyphicon-random"></span> Ziehungen <a class="btn-link text-success" bs-tooltip="showIndividualDraws ? \'Einzelne Ziehungen ausblenden\' : \'Einzelne Ziehungen einblenden\'" bs-enabled="!isTouchDevice" ng-click="toggleShowIndividualDraws()"> <span class="glyphicon" ng-class="showIndividualDraws ? \'glyphicon-eye-close\' : \'glyphicon-eye-open\'"></span> </a> </div> <table class="table"> <thead> <tr> <th rowspan="2"> <span ng-if="showIndividualDraws">Ziehung</span> </th> <th class="text-center" colspan="{{game.numberOfChoices+1}}">Anzahl Richtige</th> </tr> <tr> <th ng-repeat="n in hitRange track by $index">{{$index}}</th> </tr> </thead> <tbody ng-if="showIndividualDraws"> <tr ng-repeat="draw in game.draws track by $index"> <td ng-if="showIndividualDraws"> <!--{{draw.numbers.join(\', \')}}--> <div class="draw-panel-number" style="min-width: {{ drawNumberMinWidth }}" ng-repeat="number in draw.numbers track by $index">{{number}}</div> </td> <td ng-repeat="hits in draw.statistics track by $index">{{hits}}</td> </tr> </tbody> <tfoot> <tr> <th>Total</th> <th ng-repeat="hits in game.statistics track by $index">{{hits}}</th> </tr> </tfoot> </table> <div class="panel-body"> <form class="form-horizontal" id="add-draw-form" name="addDrawFrom"> <div class="form-group"> <label for="amountDraws" class="col-sm-2 control-label">Anzahl Ziehungen</label> <div class="col-sm-10"> <input class="form-control" type="number" min="1" id="amountDraws" ng-model="newDrawForm.drawsCount" bs-tooltip="\'Wie viele Ziehungen sollen durchgeführt werden? Gib eine Zahl ein, die grösser als 0 ist.\'" bs-enabled="!isTouchDevice"> </div> </div> <div class="form-group"> <label class="col-sm-offset-2 col-sm-10"> <input type="checkbox" id="removeExisting" ng-model="newDrawForm.deletePreviousDraws" placeholder="Anzahl Ziehungen"> Vorhandene Ziehungen löschen </label> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-10"> <button type="submit" class="btn btn-success" ng-click="performDraws()" ng-disabled="!isValidDrawCount() && !drawInProgress">Ziehungen durchführen</button> </div> </div> </form> </div> </div>'),a.put("views/templates/gw-edit-bets-panel.html",'<div class="panel panel-info"> <div class="panel-heading"> <span class="glyphicon glyphicon-edit"></span> Tipp eingeben <a class="btn-link" bs-tooltip="hideValidPlayers ? \'Alle einblenden\' : \'Ausgefüllte Spieler ausblenden\'" bs-enabled="!$parent.isTouchDevice()" ng-click="toggleHideValidPlayers()"> <span class="glyphicon" ng-class="hideValidPlayers ? \'glyphicon-eye-open\' : \'glyphicon-eye-close\'"></span> </a> </div> <div ng-if="!hasInvalidPlayers() && players.length" class="panel-body"> Super, so wie es aussieht, haben alle ihre Wette abgegeben! Benutze den Knopf unten, um zum nächsten Teil der Aufgabe zu gelangen. </div> <div ng-if="!players.length" class="panel-body"> Du hast noch keine Spieler eingegeben. <a href="/#!/spieler">Hole das nach</a>! </div> <div class="list-group"> <div class="list-group-item" ng-repeat="player in players track by $index" ng-if="!hidePlayer(player)"> <div class="list-group-item-heading tip3outof5-panel-player-name">{{player.name}}</div> <div class="list-group-item-text"> <gw-edit-player-bet gw-game="game" gw-player="player"></gw-edit-player-bet> </div> </div> </div> </div>'),a.put("views/templates/gw-edit-player-bet-form.html",'<form role="form" class="form-inline" ng-attr-id="{{\'player\' + player.id + \'-\'+game.name}}" ng-attr-name="{{\'player\' + player.id}}"> <div class="form-inline"> <div class="form-group" ng-repeat="n in range(game.numberOfChoices)" ng-class="{\'has-error\': !validInput(n)}"> <label ng-attr-for="{{\'player\' + player.id + \'-\'+game.name+\'-tipp\'+(n+1)}}" class="sr-only">Tipp {{n+1}}</label> <input type="number" name="firstTip" class="form-control" ng-model="bet[n]" ng-attr-id="{{\'player\' + player.id + \'-\'+game.name+\'-tipp\'+(n+1)}}" placeholder="Tipp {{n+1}}" required> </div> <button type="submit" class="btn btn-default" ng-disabled="!validForm()" ng-click="updatePlayer(player.id)">OK</button> </div> </form>'),a.put("views/templates/gw-number-statistics-panel.html",'<div class="panel panel-info"> <div class="panel-heading"> Häufigkeiten </div> <table class="table"> <thead> <tr> <th>Zahl</th> <th>Häufigkeit</th> </tr> </thead> <tbody> <tr ng-repeat="number in game.numberStatistics track by $index"> <td>{{$index + 1}}</td> <td>{{number}}</td> </tr> </tbody> </table> </div>'),a.put("views/templates/gw-player-bets-panel.html",'<div class="panel panel-info"> <div class="panel-heading"> <span class="glyphicon glyphicon-user"></span> Spieler <a class="btn-link pull-right" ng-click="showHelpModal()"> <span class="glyphicon glyphicon-question-sign"></span> </a> </div> <ul class="list-group"> <li class="list-group-item" ng-repeat="player in players track by $index"> {{player.name}}<span ng-hide="!validBetForPlayerWithId(player.id)"> ({{betForPlayer(player.id).join(\', \')}})</span> <span class="glyphicon pull-right" ng-class="glyphiconClass(player.id)"></span> </li> </ul> </div>'),a.put("views/templates/gw-player-hits-panel.html",'<div class="panel panel-info"> <div class="panel-heading"> <span class="glyphicon glyphicon-user"></span> Spieler <a class="btn-link pull-right" ng-click="showHelpModal()"> <span class="glyphicon glyphicon-question-sign"></span> </a> </div> <div class="table-responsive"> <table class="table"> <thead> <tr> <th rowspan="2">Spieler</th> <th rowspan="2">Tipp</th> <th colspan="{{game.numberOfChoices+1}}" class="text-center">Anzahl Richtige</th> </tr> <tr> <th ng-repeat="num in game.statistics track by $index">{{$index}}</th> </tr> </thead> <tbody> <tr ng-repeat="player in players track by $index" ng-if="validBetForPlayer(player)"> <td>{{player.name}}</td> <td>{{game.betForPlayer(player.id).join(\', \')}}</td> <td ng-repeat="hit in game.bets[player.id].statistics track by $index">{{hit}}</td> </tr> </tbody> <tfoot ng-if="showTotals"> <tr> <th colspan="2">Total</th> <th ng-repeat="hitCount in game.statistics track by $index">{{hitCount}}</th> </tr> </tfoot> </table> </div> </div>'),a.put("views/templates/info-modal.html",'<div class="modal" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="$hide()" ng-if="showButtons">&times;</button> <h4>{{title}}</h4> </div> <div class="modal-body"> {{body}} </div> <div class="modal-footer" ng-if="showButtons"> <button type="button" class="btn btn-success" ng-click="$hide()">OK</button> </div> </div> </div> </div>'),a.put("views/templates/progress-modal.html",'<div class="modal" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">Erzeuge Ziehungen</h4> </div> <div class="modal-body"> <div class="progress"> <div class="progress-bar" role="progressbar" ng-attr-aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" ng-attr-style="width: {{progress}}%;transition:none;"> <span>{{progress}}%</span> </div> </div> </div> </div> </div> </div>'),a.put("views/templates/students-panel.html",'<div class="panel panel-info"> <div class="panel-heading"> <span class="glyphicon glyphicon-user"></span> Spieler </div> <div class="panel-body" ng-if="!players.length"> <p>Du hast noch keine Spieler hinzugefügt.</p> <p ng-if="$parent.$parent.activeView == \'players\'">Benutze dazu das nachfolgende Eingabefeld!</p> </div> <div class="list-group"> <a class="list-group-item" ng-class="{active: currentPlayer == player.name}" ng-repeat="player in players track by $index" ng-click="gotoPlayer(player.id)"> {{player.name}} <button type="button" class="close" ng-if="$parent.$parent.activeView == \'players\'" ng-click="deletePlayer(player)">&times;</button> </a> </div> </div>'),a.put("views/templates/too-many-draws-modal.html",'<div class="modal" tabindex="-1" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="$hide()">&times;</button> <h4 class="modal-title">Das sind aber viele Ziehungen</h4> </div> <div class="modal-body"> <p>Das könnte etwas länger dauern...</p> <p>Bist du sicher, dass du {{newDrawForm.drawsCount}} Ziehungen durchführen willst?</p> <p>Damit das ganze etwas schneller geht, werden die einzelnen Ziehungen ausgeblendet.</p> </div> <div class="modal-footer"> <button type="submit" class="btn btn-success" ng-click="dismissTooManyDrawsModalAndContinue()">Fortfahren</button> <button type="button" class="btn btn-default" ng-click="$hide()">Abbrechen</button> </div> </div> </div> </div>')}]);